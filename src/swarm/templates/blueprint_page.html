{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>AI Team Chat</title>
        <!-- Include CSRF token in a meta tag -->
        <meta name="csrf-token" content="{{ csrf_token }}">
        <!-- Base CSS -->
        <link rel="stylesheet" href="{% static 'rest_mode/css/base.css' %}">
        <!-- Color Theme CSS (Dynamically Loaded) -->
        <link id="colorThemeLink" rel="stylesheet" href="{% static 'rest_mode/css/colors/pastel.css' %}">
        <!-- Layout Theme CSS (Dynamically Loaded) -->
        <link id="layoutThemeLink" rel="stylesheet" href="{% static 'rest_mode/css/layouts/messenger-layout.css' %}">
        <!-- Additional Styles -->
        <link rel="stylesheet" href="{% static 'rest_mode/css/style.css' %}">
    </head>
    <body>
    <!-- Splash Screen -->
    <div id="splashScreen" class="splash-screen">
        <div class="splash-content">
            <h1 id="splashText">Welcome to AI Team Chat!</h1>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container" data-theme-color="pastel" data-theme-dark="false" data-theme-layout="messenger-layout">
        <!-- Reveal Sidebar Button (Chat History Sidebar - Left) -->
        <button class="sidebar-reveal-btn" id="leftSidebarRevealBtn" aria-label="Reveal Chat History Sidebar" style="display: none;">
            â‡¦
        </button>

        <!-- Reveal Sidebar Button (Options Sidebar - Right) -->
        <button class="sidebar-reveal-btn" id="optionsSidebarRevealBtn" aria-label="Reveal Settings Sidebar" style="display: none;">
            â‡¨
        </button>

        <!-- Left Sidebar: Chat History -->
        <div class="side-panes chat-history-pane" id="chatHistoryPane">
            <!-- Hide Sidebar Button (Inside Chat History Sidebar) -->
            <button class="sidebar-hide-btn" id="leftSidebarHideBtn" aria-label="Hide Chat History Sidebar">
                â‡¨
            </button>

            <h2>ğŸ“œ Chat History</h2>
            <ul>
                <li class="active first-user" data-chat-id="1">
                    What is Open-Swarm
                    <span class="trash-can" title="Delete Chat">ğŸ—‘ï¸</span> <!-- Trash Can Icon -->
                </li>
                <li data-chat-id="2">
                    FAQ
                    <span class="trash-can" title="Delete Chat">ğŸ—‘ï¸</span> <!-- Trash Can Icon -->
                </li>
            </ul>
        </div>

        <!-- Resizable Divider -->
        <div class="resizable-divider" id="resizableDivider"></div>

        <!-- Chat Pane (Middle) -->
        <div class="chat-pane">
            <!-- Blueprint Metadata -->
            <div class="blueprint-metadata" id="blueprintMetadata">
                <h2>Loading...</h2>
                <p>Please wait, fetching blueprint metadata...</p>
            </div>

            <h1 id="chatHeading"></h1>

            <!-- First User Message Persist Spot -->
            <div id="firstUserMessage" class="first-user-message">
                <!-- The first user message will be injected here by JavaScript -->
            </div>

            <!-- Message History -->
            <div id="messageHistory" class="message-container"></div>

            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="loading-indicator">
                <!-- The loader content is dynamically inserted by JavaScript -->
            </div>

            <!-- Input Form -->
            <div class="form-container">
                <!-- "+" Upload Button -->
                <button class="input-button upload-button" id="uploadButton" aria-label="Upload">
                    â•
                </button>

                <!-- User Input Field -->
                <input
                    type="text"
                    id="userInput"
                    placeholder="Type your message here..."
                />

                <!-- Voice Record Button (Adjacent to input field) -->
                <button class="input-button" id="voiceRecordButton" aria-label="Record Voice">
                    ğŸ¤
                </button>

                <!-- Submit Button -->
                <button id="submitButton">Send</button>
            </div>
        </div>

        <!-- Right Sidebar: Settings -->
        <div class="side-panes options-pane" id="optionsPane">
            <!-- Hide Sidebar Button (Inside Options Sidebar) -->
            <button class="sidebar-hide-btn" id="optionsSidebarHideBtn" aria-label="Hide Settings Sidebar">
                â‡¦
            </button>

            <div class="settings-container">
                <h2>âš™ï¸ Settings</h2>
                <div class="toggle-container">
                    <!-- Color Theme Section -->
                    <div class="theme-dropdown theme-toggle">
                        <label for="colorSelect">ğŸ¨ Colour Theme:</label>
                        <select id="colorSelect">
                            <option value="pastel">Pastel</option>
                            <option value="tropical">Tropical</option>
                            <option value="corporate">Corporate</option>
                        </select>
                    </div>

                    <!-- Layout Theme Section -->
                    <div class="theme-dropdown theme-toggle">
                        <label for="layoutSelect">ğŸ–¥ï¸ Layout Theme:</label>
                        <select id="layoutSelect">
                            <option value="messenger-layout">Messenger</option>
                            <option value="mobile-layout">Mobile</option>
                            <option value="minimalist-layout">Minimalist</option>
                        </select>
                    </div>

                    <!-- Dark/Light Mode Toggle -->
                    <div class="toggle-section theme-toggle">
                        <div class="toggle-title">
                            ğŸŒ™/â˜€ï¸ Dark/Light Mode
                        </div>
                        <div class="toggle-content">
                            <input type="checkbox" id="darkModeToggle" />
                            <label for="darkModeToggle">Enable Dark Mode</label>
                        </div>
                    </div>

                    <!-- Debug Button -->
                    <button class="toggle-section theme-toggle" id="debugButton">
                        <div class="toggle-title">
                            ğŸ Debug
                        </div>
                    </button>

                    <!-- Raw Messages Button -->
                    <button class="toggle-section theme-toggle" id="rawMessagesButton">
                        <div class="toggle-title">
                            ï¿½ï¿½ Raw Messages
                        </div>
                    </button>
                </div>
            </div>

            <!-- Debug Pane -->
            <div class="debug-pane" id="debugPane">
                <h2>ğŸ Debug Information</h2>
                <div id="debugContent"></div>
                <!-- Tech Support Button Inside Debug Pane -->
                <button id="techSupportButtonInsideDebug" class="tech-support-button">ğŸ› ï¸ Tech Support</button>
            </div>

            <!-- Raw Messages Pane -->
            <div class="raw-messages-pane" id="rawMessagesPane" style="display: none;">
                <h2>ğŸ“„ Raw Messages</h2>
                <div id="rawMessagesContent"></div>
            </div>

            <!-- Logout Container -->
            <div class="logout-container">
                <button class="logout-button" id="logoutButton">ğŸšª Logout</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Scripts -->
    <script type="module" src="{% static 'rest_mode/js/splash.js' %}"></script>
    <script type="module" src="{% static 'rest_mode/js/base.js' %}"></script>
    <script type="module" src="{% static 'rest_mode/js/ui.js' %}"></script>
    <script type="module" src="{% static 'rest_mode/js/main.js' %}"></script>
    <script type="module" src="{% static 'rest_mode/js/theme.js' %}"></script>
    <script type="module" src="{% static 'rest_mode/js/validation.js' %}"></script>
    <script type="module" src="{% static 'rest_mode/js/toast.js' %}"></script>
    </body>
</html>
